<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mode Prof â€” Luc LÃ©ger</title>
  <link rel="stylesheet" href="style.css" />
  <script src="app.js"></script>
</head>
<body>
  <div class="header">
    <div class="logo">ğŸ‘¨â€ğŸ« Mode Prof â€” Luc LÃ©ger</div>
    <div class="nav">
      <button class="button btn-ghost" onclick="go('index.html')">Accueil</button>
    </div>
  </div>
  <div class="wrap grid">
    <div class="card">
      <h3>ParamÃ¨tres officiels</h3>
      <ul>
        <li>Distance navetteÂ : <strong>20 m</strong></li>
        <li>DÃ©part vitesseÂ : <strong>8,5 km/h</strong> (palier 1)</li>
        <li>IncrÃ©mentÂ : <strong>+0,5 km/h</strong> par minute</li>
      </ul>
      <div class="grid">
        <label>Palier actuel
          <input id="palier" type="number" min="1" step="1" value="1" />
        </label>
        <div>VitesseÂ : <strong id="vv">8.5 km/h</strong></div>
      </div>
      <div class="actions">
        <button class="button btn-warn" id="start">Lancer (1 min/palier)</button>
        <button class="button btn-danger" id="stop" disabled>Stop</button>
        <span class="timer" id="tt">00.0 s</span>
      </div>
      <p class="help">Compteur simple pour suivre la progression des paliers. La saisie officielle reste le <strong>dernier palier entendu</strong> par Ã©lÃ¨ve.</p>
    </div>
  </div>
  <script>
    const palier = document.getElementById('palier');
    const vv = document.getElementById('vv');
    function updateV(){ vv.textContent = vmaFromPalier(Number(palier.value)) + " km/h"; }
    palier.addEventListener('input', updateV);
    updateV();
    let int=null, t0=0;
    const start = document.getElementById('start'), stopBtn=document.getElementById('stop'), tt=document.getElementById('tt');
    start.onclick=()=>{
      if(int) return;
      t0=performance.now(); start.disabled=true; stopBtn.disabled=false;
      int=setInterval(()=>{
        const dt=(performance.now()-t0)/1000;
        tt.textContent=dt.toFixed(1)+" s";
        if(dt>=60){
          t0=performance.now();
          palier.value = Number(palier.value)+1;
          updateV();
          // Beep
          const a = new AudioContext();
          const o = a.createOscillator(); const g = a.createGain();
          o.type='sine'; o.frequency.value=880; o.connect(g); g.connect(a.destination); g.gain.value=.05; o.start(); setTimeout(()=>{o.stop();a.close()},150);
        }
      }, 50);
    };
    stopBtn.onclick=()=>{
      if(!int) return; clearInterval(int); int=null; start.disabled=false; stopBtn.disabled=true;
    };
  </script>
</body>
</html>
