<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Historique de la classe</title>
  <link rel="stylesheet" href="style.css" />
  <script src="app.js"></script>
</head>
<body>
  <div class="header">
    <div class="logo">ðŸ“š Historique</div>
    <div class="nav">
      <button class="button btn-ghost" onclick="go('index.html')">Accueil</button>
    </div>
  </div>
  <div class="wrap grid">
    <div class="card">
      <h3>Paires dÃ©jÃ  scannÃ©es</h3>
      <table class="table" id="tab"></table>
      <div class="actions">
        <button class="button btn-danger" onclick="if(confirm('Effacer uniquement l\\'historique ?')){ const s=loadState(); s.historique=[]; saveState(s); location.reload(); }">Vider l'historique</button>
      </div>
    </div>
  </div>
  <script>
    const s = loadState();
    const t = document.getElementById('tab');
    t.innerHTML = '<tr><th>Date</th><th>Ã‰lÃ¨ve 1</th><th>Ã‰lÃ¨ve 2</th></tr>' + (s.historique.map(h=>{
      const d = new Date(h.timestamp);
      const e0 = h.eleves[0], e1 = h.eleves[1];
      function fmt(e){ return `${e.nom} ${e.prenom} â€¢ ${e.classe} â€¢ VMA ${e.vma??'â€”'} â€¢ Vitesse ${e.vitesse_kmh??'â€”'} â€¢ Saut ${e.saut_cm??'â€”'}`; }
      return `<tr><td>${d.toLocaleString()}</td><td>${fmt(e0)}</td><td>${fmt(e1)}</td></tr>`;
    }).join('') || '<tr><td colspan="3">â€”</td></tr>');
  </script>
</body>
</html>
